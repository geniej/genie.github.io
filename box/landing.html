<!doctype html>
<html lang="ko">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript">
        let userAgent = navigator.userAgent;

        let isIPHONE = (userAgent.match('iPhone') != null || userAgent.match('iPod') != null);
        let isIPAD = (userAgent.match('iPad') != null);
        let isANDROID = (userAgent.match('Android') != null);

        let IOS_MARKET_URL = "http://itunes.apple.com/kr/app/id393499958?mt=8";
        let ANDROID_MARKET_URL = "https://play.google.com/store/apps/details?id=com.ibk.boxplatform";

        function executeApp() {
            if (isIPHONE || isIPAD) {
                let visitedAt = (new Date()).getTime(); // 방문 시간

                setTimeout(function() {
                    if ((new Date()).getTime() - visitedAt < 2000) {
                        location.href = IOS_MARKET_URL;
                    }
                }, 500);

                setTimeout(function() { 
                    location.href = "{커스텀 스킴 주소}";
                }, 0);
            } else if (isANDROID) {
                // if (userAgent.match(/Chrome/)) {
                    location.href="Intent://box#Intent;scheme=boxplatform;package=com.ibk.boxplatform;end";
                // } else {
                //     // 크롬 이외의 브라우저들(분기 태우는게 맞는건지 모르겠음)
                //     setTimeout(function() {
                //         if ((new Date()).getTime() - visitedAt < 2000) {
                //             location.href = ANDROID_MARKET_URL;
                //         }
                //     }, 500);

                //     var iframe = document.createElement('iframe');
                //     iframe.style.visibility = 'hidden';
                //     iframe.src = 'ibk://boxplatform';
                //     document.body.appendChild(iframe);
                //     document.body.removeChild(iframe); // back 호출시 캐싱될 수 있으므로 제거
                // }
            }
        }

    </script>
   
   
   
</head>
<body>
    <a href="" onclick="executeApp(this.href);return false;">BOX 앱 실행</a>
</body>

</html>